<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <!-- 预加载本地资源，提升加载速度 -->
    <link rel="preload" href="qrcode.min.js" as="script">
    <link rel="preload" href="html2canvas.min.js" as="script">
    <title>二维码卡片生成器</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px 15px;
            margin: 0;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            position: relative;
            overflow-x: hidden;
        }
        
        /* 动态背景装饰 */
        body::before {
            content: '';
            position: fixed;
            top: -10%;
            right: -5%;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.12) 0%, transparent 70%);
            border-radius: 50%;
            animation: float 20s ease-in-out infinite;
            z-index: 0;
        }
        
        body::after {
            content: '';
            position: fixed;
            bottom: -10%;
            left: -5%;
            width: 350px;
            height: 350px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.08) 0%, transparent 70%);
            border-radius: 50%;
            animation: float 15s ease-in-out infinite reverse;
            z-index: 0;
        }
        
        @keyframes float {
            0%, 100% {
                transform: translate(0, 0) rotate(0deg);
            }
            33% {
                transform: translate(30px, -30px) rotate(120deg);
            }
            66% {
                transform: translate(-20px, 20px) rotate(240deg);
            }
        }
        
        /* 背景装饰点 */
        .bg-decoration {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }
        
        .bg-decoration::before {
            content: '';
            position: absolute;
            top: 20%;
            left: 10%;
            width: 180px;
            height: 180px;
            background: linear-gradient(45deg, rgba(255, 255, 255, 0.06), transparent);
            border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
            animation: morph 10s ease-in-out infinite;
        }
        
        .bg-decoration::after {
            content: '';
            position: absolute;
            bottom: 15%;
            right: 15%;
            width: 220px;
            height: 220px;
            background: linear-gradient(225deg, rgba(255, 255, 255, 0.04), transparent);
            border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
            animation: morph 12s ease-in-out infinite reverse;
        }
        
        @keyframes morph {
            0%, 100% {
                border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
                transform: rotate(0deg) scale(1);
            }
            50% {
                border-radius: 70% 30% 30% 70% / 70% 70% 30% 30%;
                transform: rotate(180deg) scale(1.1);
            }
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }
        
        .lang-switch {
            position: absolute;
            top: -10px;
            right: 0;
            background: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #3b82f6;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.15);
            transition: all 0.3s;
            z-index: 100;
        }
        
        .lang-switch:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);
            background: #f0f9ff;
        }
        
        @media (max-width: 768px) {
            .lang-switch {
                position: fixed;
                top: 10px;
                right: 10px;
            }
        }
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 0 2px 8px rgba(0,0,0,0.15);
            letter-spacing: -0.5px;
        }
        
        .header p {
            font-size: 16px;
            font-weight: 400;
            opacity: 0.95;
            letter-spacing: 0.2px;
        }
        
        @media (min-width: 768px) {
            .header h1 {
                font-size: 48px;
                letter-spacing: -1px;
            }
            .header p {
                font-size: 18px;
            }
        }
        
        .input-section {
            background: white;
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06), 0 0 0 1px rgba(226, 232, 240, 0.8);
            position: relative;
        }
        
        .input-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
        }
        
        @media (min-width: 768px) {
            .input-section {
                padding: 40px;
            }
        }
        
        .input-group {
            margin-bottom: 25px;
        }
        
        .input-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            font-size: 14px;
            letter-spacing: 0.3px;
        }
        
        @media (min-width: 768px) {
            .input-group label {
                font-size: 16px;
            }
        }
        
        .input-group input,
        .input-group textarea,
        .input-group select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 400;
            transition: all 0.3s;
            font-family: inherit;
            box-sizing: border-box;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }
        
        .input-group select {
            background-color: white;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23333' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            padding-right: 40px;
        }
        
        .input-group input:focus,
        .input-group textarea:focus,
        .input-group select:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .input-group textarea {
            resize: vertical;
            min-height: 80px;
        }
        
        .color-picker {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        @media (min-width: 768px) {
            .color-picker {
                gap: 15px;
            }
        }
        
        .color-option {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s;
            position: relative;
            flex-shrink: 0;
        }
        
        @media (min-width: 768px) {
            .color-option {
                width: 60px;
                height: 60px;
            }
        }
        
        .color-option:hover {
            transform: scale(1.1);
        }
        
        .color-option.active {
            border-color: #333;
            box-shadow: 0 0 0 2px white, 0 0 0 4px #333;
        }
        
        .color-option.active::after {
            content: '✓';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 24px;
            font-weight: bold;
        }
        
        .btn {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            border: none;
            padding: 14px 30px;
            font-size: 16px;
            font-weight: 600;
            letter-spacing: 0.5px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            -webkit-tap-highlight-color: transparent;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);
        }
        
        @media (min-width: 768px) {
            .btn {
                padding: 16px 40px;
                font-size: 18px;
            }
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.35);
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        @media (hover: none) {
            .btn:hover {
                transform: none;
            }
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .preview-section {
            background: white;
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06), 0 0 0 1px rgba(226, 232, 240, 0.8);
            position: relative;
        }
        
        .preview-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.2), transparent);
        }
        
        @media (min-width: 768px) {
            .preview-section {
                padding: 40px;
            }
        }
        
        .preview-section h2 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
            font-size: 24px;
        }
        
        @media (min-width: 768px) {
            .preview-section h2 {
                margin-bottom: 30px;
                font-size: 28px;
            }
        }
        
        #cardCanvas {
            display: block;
            margin: 0 auto;
            max-width: 100%;
            height: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.12);
            border-radius: 30px;
        }
        
        #cardImage {
            display: block;
            margin: 0 auto;
            max-width: 100%;
            height: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.12);
            border-radius: 30px;
        }
        
        .save-tip {
            text-align: center;
            margin-bottom: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border-radius: 15px;
            font-size: 18px;
            font-weight: 600;
            box-shadow: 0 4px 16px rgba(16, 185, 129, 0.25);
            position: relative;
            overflow: hidden;
        }
        
        .save-tip::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.25), transparent);
            animation: shimmer 3s infinite;
        }
        
        @keyframes shimmer {
            0% {
                left: -100%;
            }
            100% {
                left: 100%;
            }
        }
        
        @media (min-width: 768px) {
            .save-tip {
                font-size: 20px;
                padding: 25px;
            }
        }
        
        .author-section {
            text-align: center;
            color: white;
            padding: 30px;
            margin-top: 20px;
        }
        
        .author-section p {
            font-size: 14px;
            opacity: 0.9;
            font-weight: 500;
            letter-spacing: 0.5px;
        }
        
        /* 自定义提示框 */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            z-index: 9999;
            animation: fadeIn 0.2s ease-in-out;
        }
        
        .modal-overlay.show {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal-box {
            background: white;
            border-radius: 20px;
            padding: 0;
            max-width: 420px;
            width: 100%;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
            animation: slideUp 0.3s ease-out;
            position: relative;
            overflow: hidden;
        }
        
        .modal-header {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            padding: 25px 30px;
            text-align: center;
        }
        
        .modal-icon {
            font-size: 56px;
            margin-bottom: 10px;
            filter: drop-shadow(0 2px 8px rgba(0,0,0,0.1));
        }
        
        .modal-title {
            font-size: 22px;
            font-weight: 700;
            color: white;
            margin: 0;
            letter-spacing: 0.3px;
        }
        
        .modal-content {
            padding: 30px;
        }
        
        .modal-message {
            font-size: 15px;
            font-weight: 400;
            color: #333;
            line-height: 1.8;
            margin-bottom: 20px;
            letter-spacing: 0.2px;
        }
        
        .modal-list {
            background: #f0f9ff;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #e0f2fe;
        }
        
        .modal-list-title {
            font-size: 14px;
            color: #666;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .modal-list-item {
            display: flex;
            align-items: flex-start;
            padding: 10px 0;
            border-bottom: 1px solid #e9ecef;
        }
        
        .modal-list-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }
        
        .modal-list-item-icon {
            font-size: 18px;
            margin-right: 12px;
            flex-shrink: 0;
            margin-top: 2px;
        }
        
        .modal-list-item-text {
            flex: 1;
        }
        
        .modal-list-item-label {
            font-size: 14px;
            font-weight: 500;
            color: #666;
            margin-bottom: 4px;
            letter-spacing: 0.2px;
        }
        
        .modal-list-item-value {
            font-size: 13px;
            font-weight: 400;
            color: #999;
            font-style: italic;
            letter-spacing: 0.1px;
        }
        
        .modal-buttons {
            display: flex;
            gap: 12px;
        }
        
        .modal-btn {
            flex: 1;
            padding: 14px 20px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .modal-btn-cancel {
            background: #f1f5f9;
            color: #64748b;
        }
        
        .modal-btn-cancel:hover {
            background: #e2e8f0;
            transform: translateY(-2px);
        }
        
        .modal-btn-confirm {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
        }
        
        .modal-btn-confirm:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.35);
        }
        
        .modal-btn-single {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            width: 100%;
        }
        
        .modal-btn-single:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.35);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* 页面加载指示器 */
        #pageLoader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.5s, visibility 0.5s;
        }
        
        #pageLoader.loaded {
            opacity: 0;
            visibility: hidden;
        }
        
        .loader-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .loader-text {
            color: white;
            margin-top: 20px;
            font-size: 16px;
            font-weight: 500;
            text-align: center;
            padding: 0 20px;
        }
        
        .loader-progress {
            color: rgba(255, 255, 255, 0.8);
            margin-top: 10px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <!-- 页面加载指示器 -->
    <div id="pageLoader">
        <div class="loader-spinner"></div>
        <div class="loader-text">正在加载资源...</div>
        <div class="loader-progress" id="loaderProgress">0%</div>
    </div>
    
    <!-- 背景装饰 -->
    <div class="bg-decoration"></div>
    
    <!-- 自定义提示框 -->
    <div class="modal-overlay" id="customModal">
        <div class="modal-box">
            <div class="modal-header">
                <div class="modal-icon" id="modalIcon">ℹ️</div>
                <div class="modal-title" id="modalTitle">提示</div>
            </div>
            <div class="modal-content">
                <div id="modalBody"></div>
                <div class="modal-buttons" id="modalButtons"></div>
            </div>
        </div>
    </div>
    
    <div class="container">
        <button class="lang-switch" onclick="toggleLanguage()">
            <span id="langText">EN</span>
        </button>
        
        <div class="header">
            <h1 data-zh="🎨 二维码卡片生成器" data-en="🎨 QR Code Card Generator">🎨 二维码卡片生成器</h1>
            <p data-zh="输入信息，一键生成带二维码的精美卡片" data-en="Enter information to generate beautiful cards with QR codes">输入信息，一键生成带二维码的精美卡片</p>
        </div>
        
        <div class="input-section">
            <h2 style="margin-bottom: 30px; color: #333;" data-zh="📝 填写卡片信息" data-en="📝 Fill in Card Information">📝 填写卡片信息</h2>
            
            <div class="input-group">
                <label data-zh="🔗 链接地址" data-en="🔗 Link URL">🔗 链接地址</label>
                <input type="url" id="linkUrl" data-placeholder-zh="https://your-link-here.com" data-placeholder-en="https://your-link-here.com" placeholder="https://your-link-here.com" value="">
            </div>
            
            <div class="input-group">
                <label data-zh="📌 卡片标题" data-en="📌 Card Title">📌 卡片标题</label>
                <input type="text" id="cardTitle" data-placeholder-zh="例如：我的个人主页" data-placeholder-en="e.g., My Personal Homepage" placeholder="例如：我的个人主页" value="">
            </div>
            
            <div class="input-group">
                <label data-zh="📄 卡片描述" data-en="📄 Card Description">📄 卡片描述</label>
                <textarea id="cardDesc" data-placeholder-zh="例如：欢迎访问我的个人主页，了解更多精彩内容" data-placeholder-en="e.g., Welcome to my homepage for more exciting content" placeholder="例如：欢迎访问我的个人主页，了解更多精彩内容"></textarea>
            </div>
            
            <div class="input-group">
                <label data-zh="😊 图标 Emoji（可选）" data-en="😊 Icon Emoji (Optional)">😊 图标 Emoji（可选）</label>
                <select class="input-field" id="cardIcon">
                    <option value="" data-zh="无" data-en="None" selected>无</option>
                    <option value="📚" data-zh="📚 书本" data-en="📚 Book">📚 书本</option>
                    <option value="📝" data-zh="📝 笔记" data-en="📝 Note">📝 笔记</option>
                    <option value="🎓" data-zh="🎓 毕业帽" data-en="🎓 Graduation Cap">🎓 毕业帽</option>
                    <option value="✏️" data-zh="✏️ 铅笔" data-en="✏️ Pencil">✏️ 铅笔</option>
                    <option value="📖" data-zh="📖 打开的书" data-en="📖 Open Book">📖 打开的书</option>
                    <option value="🎯" data-zh="🎯 目标" data-en="🎯 Target">🎯 目标</option>
                    <option value="💡" data-zh="💡 灯泡" data-en="💡 Light Bulb">💡 灯泡</option>
                    <option value="🌟" data-zh="🌟 星星" data-en="🌟 Star">🌟 星星</option>
                    <option value="🎨" data-zh="🎨 调色板" data-en="🎨 Palette">🎨 调色板</option>
                    <option value="🎵" data-zh="🎵 音符" data-en="🎵 Music Note">🎵 音符</option>
                    <option value="⚡" data-zh="⚡ 闪电" data-en="⚡ Lightning">⚡ 闪电</option>
                    <option value="🔥" data-zh="🔥 火焰" data-en="🔥 Fire">🔥 火焰</option>
                    <option value="💎" data-zh="💎 钻石" data-en="💎 Diamond">💎 钻石</option>
                    <option value="🎁" data-zh="🎁 礼物" data-en="🎁 Gift">🎁 礼物</option>
                    <option value="🌈" data-zh="🌈 彩虹" data-en="🌈 Rainbow">🌈 彩虹</option>
                    <option value="🚀" data-zh="🚀 火箭" data-en="🚀 Rocket">🚀 火箭</option>
                    <option value="❤️" data-zh="❤️ 爱心" data-en="❤️ Heart">❤️ 爱心</option>
                    <option value="⭐" data-zh="⭐ 星星" data-en="⭐ Star">⭐ 星星</option>
                    <option value="🎉" data-zh="🎉 庆祝" data-en="🎉 Celebration">🎉 庆祝</option>
                    <option value="🌸" data-zh="🌸 花朵" data-en="🌸 Flower">🌸 花朵</option>
                </select>
            </div>
            
            <div class="input-group">
                <label data-zh="🎨 选择配色方案" data-en="🎨 Select Color Scheme">🎨 选择配色方案</label>
                <div class="color-picker">
                    <div class="color-option active" data-color1="#667eea" data-color2="#764ba2" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"></div>
                    <div class="color-option" data-color1="#f093fb" data-color2="#f5576c" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);"></div>
                    <div class="color-option" data-color1="#4facfe" data-color2="#00f2fe" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);"></div>
                    <div class="color-option" data-color1="#43e97b" data-color2="#38f9d7" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);"></div>
                    <div class="color-option" data-color1="#fa709a" data-color2="#fee140" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);"></div>
                    <div class="color-option" data-color1="#30cfd0" data-color2="#330867" style="background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);"></div>
                    <div class="color-option" data-color1="#a8edea" data-color2="#fed6e3" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);"></div>
                    <div class="color-option" data-color1="#ff9a56" data-color2="#ff6a88" style="background: linear-gradient(135deg, #ff9a56 0%, #ff6a88 100%);"></div>
                </div>
            </div>
            
            <button class="btn" onclick="generateCard()" data-zh="✨ 生成卡片" data-en="✨ Generate Card">✨ 生成卡片</button>
        </div>
        
        <div class="preview-section" id="previewSection" style="display: none;">
            <h2 data-zh="👀 卡片预览" data-en="👀 Card Preview">👀 卡片预览</h2>
            
            <div class="save-tip">
                <span data-zh="📱 移动端：长按图片可保存到相册" data-en="📱 Mobile: Long press to save">📱 移动端：长按图片可保存到相册</span><br>
                <span data-zh="💻 电脑端：右键图片另存为" data-en="💻 PC: Right-click to save">💻 电脑端：右键图片另存为</span>
            </div>
            
            <img id="cardImage" style="display: none;" alt="二维码卡片">
            <canvas id="cardCanvas" width="600" height="900" style="display: none;"></canvas>
        </div>
    </div>
    
    <!-- 作者信息 -->
    <div class="container">
        <div class="author-section">
            <p>QRCode Generator Tool by GaoLiang © 2025</p>
        </div>
    </div>
    
    <!-- 本地加载二维码库 - 关键资源同步加载 -->
    <script src="qrcode.min.js"></script>
    
    <script>
        // 页面加载进度管理
        let loadProgress = 0;
        let qrCodeLibReady = false;
        let html2canvasLibReady = false;
        const loaderProgressEl = document.getElementById('loaderProgress');
        const pageLoaderEl = document.getElementById('pageLoader');
        
        function updateProgress(percent, text) {
            loadProgress = percent;
            if (loaderProgressEl) {
                loaderProgressEl.textContent = Math.round(percent) + '%';
            }
            const loaderText = document.querySelector('.loader-text');
            if (loaderText && text) {
                loaderText.textContent = text;
            }
        }
        
        function hideLoader() {
            if (pageLoaderEl) {
                pageLoaderEl.classList.add('loaded');
                setTimeout(() => {
                    pageLoaderEl.style.display = 'none';
                }, 300);
            }
        }
        
        // 检查库是否加载成功
        function checkLibrariesLoaded() {
            // 检查 QRCode 库
            if (typeof QRCode !== 'undefined') {
                qrCodeLibReady = true;
                console.log('✓ QRCode 库加载成功');
            }
            
            // 检查 html2canvas 库（可选）
            if (typeof html2canvas !== 'undefined') {
                html2canvasLibReady = true;
                console.log('✓ html2canvas 库加载成功');
            }
            
            // 只要 QRCode 加载成功即可
            if (qrCodeLibReady) {
                updateProgress(100, '✓ 准备就绪');
                setTimeout(hideLoader, 300);
                return true;
            }
            
            return false;
        }
        
        // 初始进度
        updateProgress(20, '正在加载资源...');
        
        // 立即检查一次（QRCode 已同步加载）
        setTimeout(function() {
            updateProgress(50, '检查资源...');
            checkLibrariesLoaded();
        }, 50);
        
        // 异步加载 html2canvas（非关键资源）
        (function() {
            const script = document.createElement('script');
            script.src = 'html2canvas.min.js';
            script.async = true;
            script.onload = function() {
                html2canvasLibReady = true;
                console.log('✓ html2canvas 加载成功（异步）');
            };
            script.onerror = function() {
                console.warn('html2canvas 加载失败（不影响核心功能）');
            };
            document.head.appendChild(script);
        })();
        
        // 监听 DOM 加载完成
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                updateProgress(70, '页面准备中...');
                setTimeout(checkLibrariesLoaded, 100);
            });
        } else {
            updateProgress(70, '页面准备中...');
            setTimeout(checkLibrariesLoaded, 100);
        }
        
        // 监听所有资源加载完成
        window.addEventListener('load', function() {
            updateProgress(90, '最后检查...');
            setTimeout(function() {
                if (!checkLibrariesLoaded()) {
                    // 如果还是没加载成功，显示警告但允许使用
                    console.error('关键库未加载，页面功能可能受限');
                    updateProgress(100, '⚠️ 部分资源未加载');
                    setTimeout(hideLoader, 500);
                }
            }, 200);
        });
        
        // 超时保护：2秒后强制完成（缩短超时时间）
        setTimeout(function() {
            if (pageLoaderEl && !pageLoaderEl.classList.contains('loaded')) {
                console.warn('强制完成加载');
                if (typeof QRCode !== 'undefined') {
                    updateProgress(100, '✓ 已加载');
                } else {
                    updateProgress(100, '⚠️ 请刷新页面');
                }
                setTimeout(hideLoader, 300);
            }
        }, 2000); // 从3秒缩短到2秒
    </script>
    
    <script>
        // 语言管理
        let currentLang = 'zh';
        
        // 语言文本配置
        const langTexts = {
            zh: {
                alertQRFailed: '二维码库加载失败，请刷新页面重试！',
                loadingQR: '正在生成二维码...',
                alertGenFailed: '二维码生成失败，请检查网络连接或稍后重试！\n\n错误信息：',
                qrCodeText: '👆 长按识别二维码查看详细内容',
                defaultDesc: '扫描下方二维码查看详细内容',
                defaultUrl: 'https://example.com',
                defaultTitle: '我的二维码卡片',
                defaultDescText: '欢迎扫描二维码',
                confirmDefaultTitle: '使用默认值',
                confirmDefaultMsg: '以下字段未填写，将使用默认值：',
                confirmUrlLabel: '链接地址',
                confirmUrlValue: '将使用示例链接',
                confirmTitleLabel: '卡片标题',
                confirmTitleValue: '将使用默认标题',
                confirmDescLabel: '卡片描述',
                confirmDescValue: '将使用默认描述',
                confirmBtnYes: '继续生成',
                confirmBtnNo: '取消',
                alertBtn: '确定',
                alertTitle: '提示'
            },
            en: {
                alertQRFailed: 'QR code library failed to load, please refresh!',
                loadingQR: 'Generating QR code...',
                alertGenFailed: 'Failed to generate QR code. Please check network or try again!\n\nError: ',
                qrCodeText: '👆 Long press to scan QR code',
                defaultDesc: 'Scan the QR code below for details',
                defaultUrl: 'https://example.com',
                defaultTitle: 'My QR Code Card',
                defaultDescText: 'Welcome to scan the QR code',
                confirmDefaultTitle: 'Use Default Values',
                confirmDefaultMsg: 'The following fields are empty and will use default values:',
                confirmUrlLabel: 'Link URL',
                confirmUrlValue: 'Will use example link',
                confirmTitleLabel: 'Card Title',
                confirmTitleValue: 'Will use default title',
                confirmDescLabel: 'Card Description',
                confirmDescValue: 'Will use default description',
                confirmBtnYes: 'Continue',
                confirmBtnNo: 'Cancel',
                alertBtn: 'OK',
                alertTitle: 'Notice'
            }
        };
        
        // 自定义 Alert 函数
        function customAlert(message, icon = 'ℹ️') {
            return new Promise((resolve) => {
                const modal = document.getElementById('customModal');
                const modalIcon = document.getElementById('modalIcon');
                const modalTitle = document.getElementById('modalTitle');
                const modalBody = document.getElementById('modalBody');
                const modalButtons = document.getElementById('modalButtons');
                
                modalIcon.textContent = icon;
                modalTitle.textContent = langTexts[currentLang].alertTitle;
                modalBody.innerHTML = `<div class="modal-message">${message}</div>`;
                modalButtons.innerHTML = `
                    <button class="modal-btn modal-btn-single" onclick="closeModal(true)">
                        ${langTexts[currentLang].alertBtn}
                    </button>
                `;
                
                modal.classList.add('show');
                
                window.modalResolve = resolve;
            });
        }
        
        // 自定义 Confirm 函数（用于默认值确认）
        function customConfirmDefaults(emptyFields) {
            return new Promise((resolve) => {
                const modal = document.getElementById('customModal');
                const modalIcon = document.getElementById('modalIcon');
                const modalTitle = document.getElementById('modalTitle');
                const modalBody = document.getElementById('modalBody');
                const modalButtons = document.getElementById('modalButtons');
                
                modalIcon.textContent = '💡';
                modalTitle.textContent = langTexts[currentLang].confirmDefaultTitle;
                
                // 构建列表项
                let listItems = '';
                emptyFields.forEach(field => {
                    const icons = {
                        url: '🔗',
                        title: '📌',
                        desc: '📄'
                    };
                    const icon = icons[field] || '•';
                    const labelKey = `confirm${field.charAt(0).toUpperCase() + field.slice(1)}Label`;
                    const valueKey = `confirm${field.charAt(0).toUpperCase() + field.slice(1)}Value`;
                    
                    listItems += `
                        <div class="modal-list-item">
                            <div class="modal-list-item-icon">${icon}</div>
                            <div class="modal-list-item-text">
                                <div class="modal-list-item-label">${langTexts[currentLang][labelKey]}</div>
                                <div class="modal-list-item-value">${langTexts[currentLang][valueKey]}</div>
                            </div>
                        </div>
                    `;
                });
                
                modalBody.innerHTML = `
                    <div class="modal-message">${langTexts[currentLang].confirmDefaultMsg}</div>
                    <div class="modal-list">
                        ${listItems}
                    </div>
                `;
                
                modalButtons.innerHTML = `
                    <button class="modal-btn modal-btn-cancel" onclick="closeModal(false)">
                        ${langTexts[currentLang].confirmBtnNo}
                    </button>
                    <button class="modal-btn modal-btn-confirm" onclick="closeModal(true)">
                        ${langTexts[currentLang].confirmBtnYes}
                    </button>
                `;
                
                modal.classList.add('show');
                
                window.modalResolve = resolve;
            });
        }
        
        // 关闭模态框
        function closeModal(result) {
            const modal = document.getElementById('customModal');
            modal.classList.remove('show');
            if (window.modalResolve) {
                window.modalResolve(result);
                window.modalResolve = null;
            }
        }
        
        // 点击背景关闭
        document.getElementById('customModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal(false);
            }
        });
        
        // 切换语言
        function toggleLanguage() {
            currentLang = currentLang === 'zh' ? 'en' : 'zh';
            document.getElementById('langText').textContent = currentLang === 'zh' ? 'EN' : '中文';
            
            // 更新所有带有 data-zh 和 data-en 属性的元素文本
            document.querySelectorAll('[data-zh][data-en]').forEach(el => {
                const text = el.getAttribute('data-' + currentLang);
                // 对于其他元素（包括 label, option, span 等），直接更新文本
                el.textContent = text;
            });
            
            // 更新所有带有 data-placeholder 属性的 input 和 textarea
            document.querySelectorAll('input[data-placeholder-zh][data-placeholder-en], textarea[data-placeholder-zh][data-placeholder-en]').forEach(el => {
                const placeholderAttr = 'data-placeholder-' + currentLang;
                el.placeholder = el.getAttribute(placeholderAttr);
            });
            
            // 更新 HTML lang 属性
            document.documentElement.lang = currentLang === 'zh' ? 'zh-CN' : 'en';
            
            // 更新 title
            document.title = currentLang === 'zh' ? '二维码卡片生成器' : 'QR Code Card Generator';
        }
        
        let selectedColor1 = '#667eea';
        let selectedColor2 = '#764ba2';
        
        // 颜色选择
        document.querySelectorAll('.color-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.color-option').forEach(o => o.classList.remove('active'));
                this.classList.add('active');
                selectedColor1 = this.getAttribute('data-color1');
                selectedColor2 = this.getAttribute('data-color2');
            });
        });
        
        // 生成卡片
        async function generateCard() {
            // 检查页面是否完全就绪
            if (!pageReady) {
                console.log('页面尚未完全就绪，等待中...');
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                if (!pageReady && typeof QRCode === 'undefined') {
                    await customAlert('⏳ 页面加载中，请稍候再试...', 'ℹ️');
                    return;
                }
            }
            
            let url = document.getElementById('linkUrl').value.trim();
            let title = document.getElementById('cardTitle').value.trim();
            let desc = document.getElementById('cardDesc').value.trim();
            const icon = document.getElementById('cardIcon').value || '';
            
            // 检查是否有空字段，收集提醒信息
            let emptyFields = [];
            
            if (!url) {
                emptyFields.push('url');
                url = langTexts[currentLang].defaultUrl;
            }
            
            if (!title) {
                emptyFields.push('title');
                title = langTexts[currentLang].defaultTitle;
            }
            
            if (!desc) {
                emptyFields.push('desc');
                desc = langTexts[currentLang].defaultDescText;
            }
            
            // 如果有空字段，显示确认提示
            if (emptyFields.length > 0) {
                const confirmed = await customConfirmDefaults(emptyFields);
                if (!confirmed) {
                    return;
                }
            }
            
            // 检查 QRCode 库是否加载
            if (typeof QRCode === 'undefined') {
                // 尝试等待一下（给安卓浏览器更多时间）
                await new Promise(resolve => setTimeout(resolve, 500));
                
                // 再次检查
                if (typeof QRCode === 'undefined') {
                    await customAlert(langTexts[currentLang].alertQRFailed + '<br><br>🔄 请刷新页面重试', '⚠️');
                    return;
                }
            }
            
            // 显示加载提示
            const loadingToast = showLoading(langTexts[currentLang].loadingQR);
            
            // 显示预览区域
            document.getElementById('previewSection').style.display = 'block';
            
            try {
                // 生成二维码
                const qrcodeDataUrl = await generateQRCode(url);
                
                if (!qrcodeDataUrl) {
                    throw new Error('二维码数据为空');
                }
                
                // 绘制到主 Canvas
                await drawCardToCanvas(title, desc, icon, qrcodeDataUrl);
                
                // 将 Canvas 转换为图片，以便长按保存
                const canvas = document.getElementById('cardCanvas');
                const cardImage = document.getElementById('cardImage');
                
                if (!canvas) {
                    throw new Error('Canvas元素未找到');
                }
                
                if (!cardImage) {
                    throw new Error('Image元素未找到');
                }
                
                // 设置安全的文件名
                const safeFileName = title.replace(/[<>:"/\\|?*]/g, '_');
                
                // 将 Canvas 转换为 Data URL
                const dataUrl = canvas.toDataURL('image/png', 1.0);
                
                // 设置图片
                cardImage.src = dataUrl;
                cardImage.alt = safeFileName;
                cardImage.style.display = 'block';
                
                canvas.style.display = 'none';  // 隐藏 Canvas
                
                // 关闭加载提示
                hideLoading(loadingToast);
                
                // 滚动到预览区域（iOS 兼容性优化）
                setTimeout(() => {
                    const previewSection = document.getElementById('previewSection');
                    if (previewSection) {
                        // iOS Safari 兼容性：降级处理
                        try {
                            previewSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        } catch (e) {
                            // 降级到不带动画的滚动
                            previewSection.scrollIntoView(true);
                        }
                    }
                }, 100);
                
            } catch (error) {
                console.error('生成失败:', error);
                hideLoading(loadingToast);
                await customAlert(langTexts[currentLang].alertGenFailed + error.message, '❌');
                document.getElementById('previewSection').style.display = 'none';
            }
        }
        
        // 生成二维码并返回 base64 数据（优化安卓兼容性）
        async function generateQRCode(url) {
            return new Promise((resolve, reject) => {
                // 清理可能存在的旧临时容器
                const oldTemp = document.getElementById('tempQrcode');
                if (oldTemp && document.body.contains(oldTemp)) {
                    document.body.removeChild(oldTemp);
                }
                
                // 创建临时容器
                const tempDiv = document.createElement('div');
                tempDiv.id = 'tempQrcode';
                tempDiv.style.cssText = 'position: absolute; left: -9999px; top: 0; width: 250px; height: 250px;';
                document.body.appendChild(tempDiv);
                
                try {
                    // 二次确认 QRCode 库已加载
                    if (typeof QRCode === 'undefined') {
                        throw new Error('QRCode库未加载');
                    }
                    
                    // 生成二维码
                    const qr = new QRCode(tempDiv, {
                        text: url,
                        width: 250,
                        height: 250,
                        colorDark: "#000000",
                        colorLight: "#ffffff",
                        correctLevel: QRCode.CorrectLevel.H
                    });
                    
                    // 等待二维码生成（延长到6秒，给安卓浏览器更多时间）
                    let attempts = 0;
                    const maxAttempts = 60; // 6秒 (100ms * 60)
                    
                    const checkQRCode = () => {
                        attempts++;
                        
                        const qrcodeCanvas = tempDiv.querySelector('canvas');
                        const qrcodeImg = tempDiv.querySelector('img');
                        
                        // 优先使用 canvas
                        if (qrcodeCanvas && qrcodeCanvas.width > 0 && qrcodeCanvas.height > 0) {
                            try {
                                const dataUrl = qrcodeCanvas.toDataURL('image/png');
                                if (dataUrl && dataUrl.length > 100) { // 确保数据有效
                                    console.log('✓ 二维码生成成功（Canvas）');
                                    if (document.body.contains(tempDiv)) {
                                        document.body.removeChild(tempDiv);
                                    }
                                    resolve(dataUrl);
                                    return;
                                }
                            } catch (e) {
                                console.error('Canvas转换失败:', e);
                            }
                        }
                        
                        // 如果有 img 且已加载完成
                        if (qrcodeImg && qrcodeImg.complete && qrcodeImg.naturalWidth > 0) {
                            try {
                                // 将 img 转为 canvas
                                const tempCanvas = document.createElement('canvas');
                                tempCanvas.width = 250;
                                tempCanvas.height = 250;
                                const tempCtx = tempCanvas.getContext('2d');
                                tempCtx.drawImage(qrcodeImg, 0, 0, 250, 250);
                                const dataUrl = tempCanvas.toDataURL('image/png');
                                console.log('✓ 二维码生成成功（Image）');
                                if (document.body.contains(tempDiv)) {
                                    document.body.removeChild(tempDiv);
                                }
                                resolve(dataUrl);
                                return;
                            } catch (e) {
                                console.error('图片转换失败:', e);
                            }
                        }
                        
                        // 继续等待或超时
                        if (attempts < maxAttempts) {
                            setTimeout(checkQRCode, 100);
                        } else {
                            console.error('二维码生成超时，尝试次数:', attempts);
                            if (document.body.contains(tempDiv)) {
                                document.body.removeChild(tempDiv);
                            }
                            reject(new Error('二维码生成超时（6秒后未检测到有效数据）\n\n建议：\n1. 刷新页面重试\n2. 检查浏览器兼容性'));
                        }
                    };
                    
                    // 首次检查延迟300ms，给安卓浏览器更多初始化时间
                    setTimeout(checkQRCode, 300);
                    
                } catch (error) {
                    console.error('二维码生成异常:', error);
                    if (document.body.contains(tempDiv)) {
                        document.body.removeChild(tempDiv);
                    }
                    reject(error);
                }
            });
        }
        
        // 绘制卡片到 Canvas（iOS 兼容性优化）
        async function drawCardToCanvas(title, desc, icon, qrcodeDataUrl) {
            return new Promise((resolve, reject) => {
                const canvas = document.getElementById('cardCanvas');
                if (!canvas) {
                    reject(new Error('Canvas 元素未找到'));
                    return;
                }
                
                const ctx = canvas.getContext('2d', { 
                    alpha: true,
                    willReadFrequently: false // iOS 性能优化
                });
                
                if (!ctx) {
                    reject(new Error('无法获取 Canvas 上下文'));
                    return;
                }
                
                // 清空画布
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // 绘制渐变背景
                const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                gradient.addColorStop(0, selectedColor1);
                gradient.addColorStop(1, selectedColor2);
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // 绘制装饰圆形
                const radialGradient = ctx.createRadialGradient(canvas.width * 0.8, canvas.height * 0.2, 0, canvas.width * 0.8, canvas.height * 0.2, canvas.width * 0.8);
                radialGradient.addColorStop(0, 'rgba(255, 255, 255, 0.1)');
                radialGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');
                ctx.fillStyle = radialGradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // 绘制图标（如果有）
                if (icon) {
                    ctx.font = '80px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillStyle = 'white';
                    ctx.fillText(icon, canvas.width / 2, 150);
                }
                
                // 绘制标题
                ctx.font = 'bold 42px Arial, sans-serif';
                ctx.textAlign = 'center';
                ctx.fillStyle = 'white';
                ctx.shadowColor = 'rgba(0, 0, 0, 0.2)';
                ctx.shadowBlur = 10;
                ctx.shadowOffsetY = 2;
                ctx.fillText(title, canvas.width / 2, icon ? 230 : 180);
                
                // 绘制描述
                ctx.font = '18px Arial, sans-serif';
                ctx.shadowBlur = 0;
                ctx.shadowOffsetY = 0;
                wrapText(ctx, desc, canvas.width / 2, icon ? 280 : 230, canvas.width - 100, 30);
                
                // 绘制二维码白色背景
                ctx.fillStyle = 'white';
                ctx.shadowColor = 'rgba(0, 0, 0, 0.2)';
                ctx.shadowBlur = 30;
                ctx.shadowOffsetY = 10;
                roundRect(ctx, (canvas.width - 300) / 2, 360, 300, 300, 20);
                ctx.fill();
                ctx.shadowBlur = 0;
                ctx.shadowOffsetY = 0;
                
                // 从 base64 加载并绘制二维码（iOS 兼容性优化）
                const qrImage = new Image();
                
                // 添加超时保护（iOS 可能加载慢）
                const imageLoadTimeout = setTimeout(() => {
                    console.error('二维码图片加载超时');
                    reject(new Error('二维码图片加载超时（iOS 兼容性问题）'));
                }, 10000); // 10秒超时
                
                qrImage.onload = function() {
                    clearTimeout(imageLoadTimeout);
                    
                    try {
                        ctx.drawImage(qrImage, (canvas.width - 250) / 2, 385, 250, 250);
                        
                        // 绘制提示文字
                        ctx.font = 'bold 22px Arial, sans-serif';
                        ctx.fillStyle = 'white';
                        ctx.fillText(langTexts[currentLang].qrCodeText, canvas.width / 2, 720);
                        
                        // 绘制底部文字
                        ctx.font = '14px Arial';
                        ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                        ctx.fillText('QRCode Generator Tool by GaoLiang © 2025', canvas.width / 2, 850);
                        
                        resolve();
                    } catch (e) {
                        clearTimeout(imageLoadTimeout);
                        console.error('Canvas 绘制失败:', e);
                        reject(new Error('Canvas 绘制失败: ' + e.message));
                    }
                };
                
                qrImage.onerror = function(e) {
                    clearTimeout(imageLoadTimeout);
                    console.error('二维码图片加载失败:', e);
                    reject(new Error('二维码图片加载失败'));
                };
                
                // iOS Safari 需要明确设置 crossOrigin
                qrImage.crossOrigin = 'anonymous';
                qrImage.src = qrcodeDataUrl;
            });
        }
        
        // 文字换行函数
        function wrapText(context, text, x, y, maxWidth, lineHeight) {
            const words = text.split('');
            let line = '';
            let lines = [];
            
            for (let n = 0; n < words.length; n++) {
                const testLine = line + words[n];
                const metrics = context.measureText(testLine);
                const testWidth = metrics.width;
                
                if (testWidth > maxWidth && n > 0) {
                    lines.push(line);
                    line = words[n];
                } else {
                    line = testLine;
                }
            }
            lines.push(line);
            
            const startY = y - ((lines.length - 1) * lineHeight) / 2;
            for (let i = 0; i < lines.length; i++) {
                context.fillText(lines[i], x, startY + (i * lineHeight));
            }
        }
        
        // 圆角矩形函数
        function roundRect(ctx, x, y, width, height, radius) {
            ctx.beginPath();
            ctx.moveTo(x + radius, y);
            ctx.lineTo(x + width - radius, y);
            ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
            ctx.lineTo(x + width, y + height - radius);
            ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
            ctx.lineTo(x + radius, y + height);
            ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
            ctx.lineTo(x, y + radius);
            ctx.quadraticCurveTo(x, y, x + radius, y);
            ctx.closePath();
        }
        
        // 显示加载提示
        function showLoading(message) {
            const loading = document.createElement('div');
            loading.id = 'loadingToast';
            loading.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0, 0, 0, 0.8);
                color: white;
                padding: 20px 30px;
                border-radius: 10px;
                font-size: 16px;
                z-index: 10000;
                text-align: center;
            `;
            loading.innerHTML = `
                <div style="margin-bottom: 10px;">⏳</div>
                <div>${message}</div>
            `;
            document.body.appendChild(loading);
            return loading;
        }
        
        // 隐藏加载提示
        function hideLoading(loading) {
            if (loading && loading.parentNode) {
                loading.parentNode.removeChild(loading);
            }
        }
        
        // 页面就绪标志
        let pageReady = false;
        
        // 标记页面完全就绪
        window.addEventListener('load', function() {
            setTimeout(function() {
                pageReady = true;
                console.log('✓ 页面完全就绪，可以使用所有功能');
            }, 500); // 给安卓浏览器500ms缓冲时间
        });
        
        // 如果 DOMContentLoaded 已触发，也标记为部分就绪
        if (document.readyState === 'interactive' || document.readyState === 'complete') {
            pageReady = true;
        } else {
            document.addEventListener('DOMContentLoaded', function() {
                pageReady = true;
            });
        }
        
        // 回车快捷键
        document.getElementById('linkUrl').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') generateCard();
        });
        
        document.getElementById('cardTitle').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') generateCard();
        });
    </script>
</body>
</html>

